広告予算配分 最適化シミュレーター
過去の広告パフォーマンスデータを基に、機械学習（XGBoost）と数理最適化を用いて、コンバージョン数を最大化するための最適な日次予算配分をシミュレーションするWebアプリケーションです。

ユーザー利用フロー
このアプリケーションを広告運用担当者などが利用する際の、基本的な操作フローは以下の通りです。

① パフォーマンスレポートの準備とアップロード

日別・キャンペーン別の実績（最低でも「日」「キャンペーン名」「コスト」「コンバージョン数」を含む）が記載されたCSVファイルを用意します。

サイドバーの「パフォーマンスレポートをアップロード」から、用意したCSVファイルをアップロードします。

② 学習期間の確認・設定

ファイルがアップロードされると、CSVに含まれるデータの一番古い日付と一番新しい日付が自動で「学習データ期間」の開始日・終了日に設定されます。

必要に応じて、ユーザーがこの期間を自由に変更することも可能です。

期間を設定後、「データを処理し、モデルを学習する」ボタンをクリックします。

③ 最適化条件の設定

モデルの学習が完了すると、メイン画面にシミュレーション設定エリアが表示されます。

最適化期間: 予算配分をシミュレーションしたい未来の期間（開始日・終了日）を設定します。

1日あたりの総予算: シミュレーション期間中、1日あたりに投下できる全体の予算額をスライダーで設定します。

キャンペーン別の上限予算:（推奨）各キャンペーンが1日に消化できる現実的な上限額を、キャンペーンごとにスライダーで設定します。これにより、より精度の高い配分結果が得られます。

④ 最適化の実行と結果の確認

すべての条件を設定した後、「この設定で最適化を実行する」ボタンをクリックします。

計算が完了すると、画面に最適化結果が表示されます。

パフォーマンスサマリー: 予測される合計CV数やCPAが、過去の実績と比較して表示されます。

キャンペーン別パフォーマンス: キャンペーンごとの平均推奨予算や予測CPAがテーブルで表示されます。結果はExcel形式でダウンロードも可能です。

日別パフォーマンス推移: 予測CV数の推移や、日ごとの詳細な予算配分がグラフで可視化されます。

🚀 アプリケーションのデプロイと公開手順
このガイドでは、このStreamlitアプリケーションをGitHubにアップロードし、「Streamlit Community Cloud」を利用してWebアプリケーションとして無料で公開する手順を説明します。

必要なファイル
デプロイには、以下の2つのファイルが同じ場所に必要です。

app.py: StreamlitアプリケーションのPythonコード本体。

requirements.txt: アプリケーションの実行に必要なPythonライブラリを記述したファイル。

⚠️ 重要: requirements.txt の保存形式について

requirements.txt ファイルは、必ずプレーンテキスト形式 (.txt) で保存してください。Macの「テキストエディット」などを使用する場合、デフォルトでリッチテキスト形式 (.rtf) になってしまうことがあります。保存時にメニューの「フォーマット」から「標準テキストにする」を選択してください。ファイルがRTF形式になっていると、デプロイ時にエラーが発生します。

デプロイ手順
ステップ1: GitHubリポジトリの作成とファイルのアップロード
GitHubにログインし、新しいリポジトリを作成します。（リポジトリ名は budget-optimizer など、任意のもので構いません）

作成したリポジトリに、ローカルで準備した app.py と requirements.txt の2つのファイルをアップロードします。

ステップ2: Streamlit Community Cloudでのデプロイ
Streamlit Community Cloud にアクセスし、お持ちのGitHubアカウントでサインアップ（またはログイン）します。

ダッシュボードが表示されたら、右上の「New app」ボタンをクリックします。

「Deploy an app」の画面で、以下の設定を行います。

Repository: ステップ1で作成したGitHubリポジトリを選択します。

Branch: main または master を選択します。

Main file path: app.py となっていることを確認します。

設定が完了したら、「Deploy!」ボタンをクリックします。

デプロイが自動的に開始されます。（初回はライブラリのインストールなどで数分かかることがあります）

"Your app is in the oven..." というメッセージの後、アプリケーションの画面が表示されれば成功です！表示されたURLは誰でもアクセス可能な公開URLとなります。

ローカル環境での実行方法
自分のPCでアプリケーションを動かす場合は、以下の手順を実行します。

app.py と requirements.txt を同じフォルダに保存します。

ターミナル（またはコマンドプロンプト）で、そのフォルダに移動します。

必要なライブラリをインストールします。

pip install -r requirements.txt

以下のコマンドでアプリケーションを起動します。

streamlit run app.py

ブラウザが自動的に立ち上がり、アプリケーションが表示されます。
